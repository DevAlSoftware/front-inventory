<table mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8">

  <!-- ID Venta -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> ID Venta </th>
    <td mat-cell *matCellDef="let sale"> {{ sale.id }} </td>
  </ng-container>

  <!-- Cliente -->
  <ng-container matColumnDef="customer">
    <th mat-header-cell *matHeaderCellDef> Cliente </th>
    <td mat-cell *matCellDef="let sale"> {{ sale.customer.fullName }} </td>
  </ng-container>

  <!-- Fecha -->
  <ng-container matColumnDef="saleDate">
    <th mat-header-cell *matHeaderCellDef> Fecha </th>
    <td mat-cell *matCellDef="let sale"> {{ sale.saleDate }} </td>
  </ng-container>

  <!-- Productos (Detalles de Venta) -->
  <ng-container matColumnDef="details">
    <th mat-header-cell *matHeaderCellDef> Detalles </th>
    <td mat-cell *matCellDef="let sale">
      <table mat-table [dataSource]="sale.saleDetails" class="inner-table">

        <!-- Producto -->
        <ng-container matColumnDef="productName">
          <th mat-header-cell *matHeaderCellDef> Producto </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.product.name }} </td>
        </ng-container>

        <!-- Cantidad -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.quantity }} </td>
        </ng-container>

        <!-- Precio -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef> Precio </th>
          <td mat-cell *matCellDef="let detail"> {{ detail.product.price | moneda }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['productName', 'quantity', 'price']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['productName', 'quantity', 'price']"></tr>
      </table>
    </td>
  </ng-container>

  

  <tr mat-header-row *matHeaderRowDef="['id', 'customer', 'saleDate', 'details']"></tr>
  <tr mat-row *matRowDef="let row; columns: ['id', 'customer', 'saleDate', 'details'];"></tr>
</table>
